<div>

  <h2>New Web Client Services</h2>
  <p>
    Based on the Client API that has been introduced in M2, some new client services have
    been introduced:
  </p>

  <h3>JavaScriptLoader service</h3>
  <p>
    If a custom component requires additional JavaScript code on the client, the JavaScriptLoader
    can be used to load a JavaScript file just before the component uses it.
    The JavaScriptLoader will ensure that the file is loaded only once, even if <em>require()</em>
    is called subsequently.
  </p>
<pre>
JavaScriptLoader loader = RWT.getClient().getService( JavaScriptLoader.class );
loader.require( "rwt-resources/myComponent/MyFile.js" );
</pre>

  <h3>ClientInfo service</h3>
  <p>
    The ClientInfo service provides additional information about the client that is connected to the
    current UI session.
    In this version, the service provides the client's locale and its timezone offset in minutes.
    Unfortunately, it's not possible to obtain the actual timezone in JavaScript.
  </p>
<pre>
ClientInfo clientInfo = RWT.getClient().getService( ClientInfo.class );
int timezoneOffset = clientInfo.getTimezoneOffset();
Locale clientLocale = clientInfo.getLocale();
</pre>

  <h2>API Changes</h2>

  <h3>Class Graphics deprecated</h3>
  <p>
    The class <em>Graphics</em> had been used to create <em>shared</em> instances of resources like
    <em>Color</em> and <em>Font</em> before resource constructors were introduced in 1.3.
    This practice is problematic because instances created using these methods throw an exception
    when trying to dispose them. Moreover, they cannot be garbage collected.
    In RAP 2.0, resources should only be created using the constructors
    of <em>Color</em>, <em>Font</em>, <em>Cursor</em>, and <em>Image</em>.
  </p>
  <p>
    Graphics also provided methods for test size measurement. We expect that these methods are
    hardly used by application code and can be replaced by SWT's <em>GC</em> API.
    To measure a string in a given font, create a GC, set the font, and call the GC methods
    <em>stringExtent</em> or <em>textExtent</em>. Don't forget to dispose of the GC afterwards.
  </p>

  <h3>I-prefixed Interfaces</h3>
  <p>
    The prefix “I” in interface names like <em>IEntryPoint</em> is a heritage from the Eclipse
    platform.
    This deviates from the naming pattern used in SWT and other libraries, and also from the Java
    class library.
    Since it is not even used consistently in RAP, we're removing the prefix from all interfaces.
  </p>

  <h3>Removed Interface ILifeCycleAdapter</h3>
  <p>
    The interface <em>ILifeCycleAdapter</em> has been removed.
    This interface was never meant to be used or implemented by clients, so you shouldn't be
    affected.
  </p>

  <h3>Service handlers</h3>
  <p>
    The interface <em>ServiceHandler</em> has been changed.
    The <em>service</em> method now provides two parameters <em>request</em> and <em>response</em>
    to the implementation.
    Developers don't have to obtain the request and response objects from static methods anymore.
  </p>
  <p>
    The <em>ServiceManager</em> has got a new method <em>getServiceHandlerUrl( String )</em>.
    Developers should use this new method to obtain the URL to access a service handler instead
    of assembling the URL manually.
  </p>

  <h2>IApplication, again</h2>
  <p>
    In M3, we reversed the relationship between entrypoints and branding extensions, which also
    requires a change for applications that use the <em>IApplication</em> interface for single-sourcing.
    Our solution was to support the parameters <em>path</em> and <em>brandingId</em>
    added to application extensions.
    It turned out that this approach lead to problems (<?=bug(394805)?>) so we had to change it again.
  </p>
  <p>
    Application extensions can now be referenced by an <em>entrypoint</em> extension using the new
    parameter <em>applicationId</em>.
    To make an existing application extension available in RAP, you have to create a new entrypoint
    extension and specify the id of the application extension instead of an EntryPoint class:
  </p>
<pre>
&lt;extension point="org.eclipse.rap.ui.entrypoint"&gt;
  &lt;entrypoint id="example.application.entrypoint"
      path="/example"
      brandingId="example.branding"
      <strong>applicationId="example.application"</strong> /&gt;
  &lt;/entrypoint&gt;
&lt;/extension&gt;
</pre>
  <p>
    This allows to use existing application extensions without modification.
    Path and branding can be specified in the same way as for all other entrypoints.
  </p>

  <h2>Settings</h2>

  <h3>Development Mode</h3>
  <p>
    During development, it's recommended to start RAP in </en>development mode</en>.
    In this mode, the JavaScript for the web client is not compressed and potential client-side
    errors will not be caught.
    This new setting replaces the old <em>clientLibraryVersion</em>, which has been used for this
    purpose before.
    In the RAP Launcher, you'll find a new option to enable the development mode:
  </p>
  <p>
    <img class="framed" title="Development mode" src="images/RAPLauncher-dev-mode.png" />
  </p>
  <p>
    In OSGi launch configurations, please replace the VM parameter
    <code>-Dorg.eclipse.rwt.clientLibraryVersion=DEBUG</code> with
    <code>-Dorg.eclipse.rap.rwt.developmentMode=true</code>.
  </p>

</div>
