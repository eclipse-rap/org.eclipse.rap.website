<div>

  <h3>Updating from RAP 1.5 (Eclipse Juno)?</h3>
  <p>
    You may also check the
    <a href="../2.0/">New and Noteworthy for RAP 2.0</a> and the
    <a href="../2.0/migration-guide/">RAP 2.0 migration guide</a>.
  </p>

<h2>Widget Set</h2>

  <h3>Drag&amp;Drop Support for Client Files</h3>

  <img class="framed" src="images/upload1.png" />

  <p>
    You can now allow users to upload files from their desktop by dropping them onto a widget.
    To do so, you use the SWT Drag&amp;Drop API with the transfer type
    <code>ClientFileTransfer</code>.
    The following example shows how to enable a Label to accept files:
  </p>

<pre lang="java">
Label dropLabel = new Label( parent, SWT.BORDER );
dropLabel.setText( "Drop files here" );
DropTarget dropTarget = new DropTarget( dropLabel, DND.DROP_MOVE );
dropTarget.setTransfer( new Transfer[]{ ClientFileTransfer.getInstance() } );
dropTarget.addDropListener( new DropTargetAdapter() {
  @Override
  public void drop( DropTargetEvent event ) {
    filesDropped( (ClientFile[])event.data );
  }
} );
</pre>

  <p>
    The <code>event.data</code> field will contain an array of <code>ClientFile</code>s, that
    provide information on the dropped files.
    It's an array because the user can also select and drag multiple files.
    To actually upload the dropped files, the new client service <code>ClientFileUploader</code>
    can be used:
  </p>

<pre>
ClientFileUploader uploader = RWT.getClient().getService( ClientFileUploader.class );
uploader.submit( uploadUrl, clientFiles );
</pre>

  <p>
    Finally, you have to accept and store the files on the server.
    The fileupload component in the <a href="http://eclipse.org/rap/incubator/">RAP Incubator</a>
    can be used to handle uploads in RAP easily.
    The <code>FileDialog</code>, also in the RAP Incubator, now also accepts dropped files.
  </p>

  <h3>Migrated DropDown widget to RAP Core</h3>

  <img class="framed" src="images/dropdown.png" />

  <p>
    The <i>DropDown</i> widget has been graduated from the RAP Incubator and is now included in the RAP
    core. It is basically a popup-list that can be attached to a Text widget. It simplifies
    implementing components similar to the JFace <i>FieldAssist</i>, but is significantly better
    suited for the RAP framework than <i>FieldAssist</i>.
  </p>
  <p>
    Note that the <a href="http://wiki.eclipse.org/RAP/Incubator/DropDown"><i>AutoSuggest</i></a>
    component that builds on the <i>DropDown</i> widget is still in the same Incubator repository,
    but has been adjusted in the master branch/nightly builds to work with RAP 2.3. Take care not
    to include the old Incubator version of <i>DropDown</i> in your RAP 2.3 target, it may break
    the application.
  </p>

  <h3>Row Template supports percentage values</h3>

  <p>
    In the class <em>Cell</em> the methods <em>setLeft</em>, <em>setTop</em>, <em>setBottom</em>
    and <em>setRight</em> now all have an optional parameter &quot;percentage&quot; that accepts
    a float value between 0 and 100. The value is relative to the width/height of the row and is
    added to the given absolute pixel offset.
  </p>

  <h3>Client-side (C)Combo rework</h3>

  <p>
    The JavaScript part of the <i>Combo</i> widget implementation has been completely
    rewritten. It now uses client-side <i>DropDown</i> implementation for it's list, allowing
    it to handle a much larger amount of items without performance degradation.
  </p>

  <p>
    As a result it's now also possible to theme <i>Combo</i> list items independently.
    The <i>Combo-List-Item</i> CSS element supports <i>color</i>,
    <i>background-color</i>, <i>background-image</i>, <i>text-decoration</i>,
    <i>text-shadow</i> and <i>padding</i>.
  </p>

  <h3>JavaScript API for Widget HTML manipulation</h3>

  <p>
    JavaScript widget objects obtained via <code>rap.getObject( id )</code> now have an field
    <a href="http://download.eclipse.org/rt/rap/doc/2.3/guide/reference/jsdoc/symbols/Widget.html#$el">"$el"</a>
    that allows manipulating their HTML element. Currently it can only be used to set
    HTML attributes, but this already makes it possible to assign test-id's for easier
    <a href="http://eclipsesource.com/blogs/2014/04/29/how-to-write-ui-tests-for-rap-with-selenium-2-0/">UI-Testing</a>.
    It could also be used to add
    <a href="http://eclipsesource.com/blogs/2014/05/28/rap-and-accessibility-screen-reader/">ARIA</a>
    attributes that can be evaluated by screen reader software.
  </p>

  <h2>Browser Support</h2>

  <h3>Firefox 29+ Detection</h3>

  <p>
    Due to changes in the <b>Firefox</b> API, RAP 2.2 and earlier was no longer able to correctly
    identify Firefox 29. As a result, existing RAP application may crash or not start at all.
    This issue is fixed in 2.3. For older versions of RAP, please visit the
    <a href="https://wiki.eclipse.org/RAP/FAQ#Blank_page_or_client_crash_in_Firefox_29.2B">FAQ</a>
    for workarounds that you can apply yourself.
  </p>

  <h3>Webkit/Chrome 33+ glitch solved</h3>

  <p>
    Recently, a <a href="https://bugs.webkit.org/show_bug.cgi?id=125070">bug</a> has been introduced
    in the WebKit engine, which is the basis for <b>Chrome, Safari and Opera</b>. This bug led to
    RAP UIs becoming partly invisible when a <i>Canvas</i> widget or certain custom widgets are
    on screen. RAP now works around this issue by using a different way to apply widget backgrounds.
    For older versions of RAP, please visit the
    <a href="https://wiki.eclipse.org/RAP/FAQ#Widgets_disappearing_in_Google_Chrome.2C_Safari_or_Opera">FAQ</a>
    for workarounds that you can apply yourself.
  </p>

  <h3>Heads up: No IE8 support in upcoming RAP 3.0</h3>

  <p>
    The RAP 2.3.x versions will be the last to support Internet Explorer 7 and 8. We
    currently plan to release RAP 3.0 this winter with a minimum requirement of version 9 or later
    for Internet Explorer. The minimum versions for other browser will likely be raised as well.
    This will allow us to clean up a lot of old code and concentrate more on HTML5/CSS3 based
    features not possible with older browser.
  </p>

  <h2>Application Development</h2>

  <h3>New Incubator Project: e4 on RAP</h3>

  <p>
    Tom Schindl is working on <a href="http://eclipsesource.com/blogs/2014/04/10/getting-started-with-eclipse4-applications-on-rap/">e4 support for RAP</a>,
    and the necessary additional components will (for now) live in <a href="http://git.eclipse.org/c/rap/incubator/org.eclipse.rap.incubator.e4.git/">this</a> RAP Incubator repository.
  </p>

  <h3>Heads up: Deprecation in lifecycle package</h3>

  <p>
    In an effort to remove the internals of the request processing (lifecycle and phases) from our
    public API, we are currently marking all API in the package <em>org.eclipse.rap.rwt.lifecycle</em>
    as deprecated.
    This includes lifecycle adapters (LCAs), phase listeners, and the class <code>WidgetUtil</code>.
    Most of this API is only relevant for custom widgets, and is replaced by the new API in the
    <em>org.eclipse.rap.rwt.remote</em> package
    (<code>RemoteObject</code>, <code>OperationHandler</code> etc.).
    The class <code>WidgetUtil</code> is replaced by a stripped-down copy in
    <em>org.eclipse.rap.rwt.widgets</em>.
  </p>
  <p>
    All deprecated API is still supported in 2.3 and will be removed in 3.0.
    We'll provide a migration guide that explains alternatives.
  </p>

  <h3>New API for Singletons</h3>

  <p>
    We already provide the class <em>SingletonUtil</em> to facilitate the conversion of classic
    singletons to UISession-scoped singletons for use in RAP's multi-user environment.
    This class has a new method named <em>getUniqueInstance</em> that accepts a UISession instance
    as a parameter. You can obtain a unique instance of a given class for the current UISession like so:
  </p>

<pre lang="java">
public static MySingleton getInstance() {
  UISession uiSession = RWT.getUISession();
  return SingletonUtil.getUniqueInstance( MySingleton.class, uiSession );
}
</pre>

  <p>
    In this case, the method is equivalent to the existing method <code>getSessionInstance()</code>.
    However, with the additional parameter, it allows you to obtain the singleton instance
    for a given UISession <em>even from another thread</em> without having to wrap your code
    in a runnable and pass it to <code>uiSession.exec()</code>.
    To prepare your singleton for access from background threads, you may consider adding a
    parameter to the getInstance method as shown below.
    This pattern also allows for better unit tests.
  </p>

<pre lang="java">
private static MySingleton getInstance( UISession uiSession ) {
  return SingletonUtil.getUniqueInstance( MySingleton.class, uiSession );
}
</pre>

  <p>
    The old method <code>getSessionInstance()</code> still exists and delegates to the new one,
    so you should be able to adjust your code using an <q>Inline Method</q> refactoring.
  </p>

  <h3>Support for Application Singletons</h3>

  <p>
    Similar to UISession singletons, you can now also create singletons with application scope.
    Whenever you run multiple RAP applications in a single VM, there may be classes in a shared
    bundle that should have exactly one instance per application.
  </p>

<pre lang="java">
ApplicationContext context = RWT.getApplicationContext();
SingletonUtil.getUniqueInstance( MySingleton.class, applicationContext );
</pre>

  <h3>Support for entrypoints at the root path</h3>

  <p>
    Entrypoints in RAP are registered with a servlet path (e.g. &quot;/example&quot;).
    When deployed in a servlet container, every web application also has a context path.
    For example, a WAR file named &quot;myapp.war&quot; will lead to the context path
    &quot;/myapp&quot; This results in a URL like the following:
  </p>
<pre>
  http://example.com/myapp/example
</pre>
    It may be desirable to make the default entrypoint of an application directly available at the
    application's base URL:
<pre>
  http://example.com/myapp/
</pre>
  <p>
    To enable this pattern, entry points can now also be registered at the root path (&quot;/&quot;):
  </p>
<pre lang="java">
public class ExampleApplication implements ApplicationConfiguration {

  public void configure( Application application ) {
    application.addEntryPoint( &quot;/&quot;, ExampleEntryPoint.class, null );
  }

}
</pre>
  <p>
    Please note that for RWT standalone, you should map the RWT servlet to the empty string
    (the path &quot;/&quot; is a special case in the servlet spec, it identifies the so-called
    <em>global</em> servlet).
  </p>
<pre lang="xml">
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;rwtServlet&lt;/servlet-name&gt;
  &lt;url-pattern&gt;&lt;/url-pattern>
&lt;/servlet-mapping&gt;
</pre>

  <h3>Support for starting with HTTP POST</h3>

  <p>
    Since RAP 1.5, the RAP server required that the initial request to an application was made
    using the HTTP GET method. Some users have reported that in certain restricted environments,
    it can be helpful to be able to start a RAP application with a POST request.
    Therefore we changed our policy and allow for RAP applications being accessed with a POST
    request again.
  </p>

</div>