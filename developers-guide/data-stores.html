<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>RAP - Developer's Guide</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="keywords" content="rap, rwt, osgi, eclipse, equinox, eclipse rap, ajax" />
  <meta name="google-site-verification" content="kMX1SI1MRFpyzEPh4yv_TXRUpKLmBVvENEfQtjdZuwI" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" type="text/css" href="../_theme/reset.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/layout.css" media="screen" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/index-search-box.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/devguide.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="../_theme/prettify/prettify.css" />
  <!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="/rap/rap-layout-fixes-ie.css"/><![endif]-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="../script.js"></script>
  <script type="text/javascript" src="../_theme/prettify/prettify.js"></script>
  <script type="text/javascript" src="../_theme/prettify/lang-css.js"></script>
  <style type="text/css">
    input::-ms-clear, input::-ms-reveal {
      display: none;
    }
  </style>
</head>
<body>

  <div id="info-box">
    <div>
      <img src="../images/twitter.png" alt="Twitter Logo" />
      <a href="https://twitter.com/EclipseRAP/">Follow us on Twitter</a>
    </div>
    <div>
      <img src="../images/project-stats.png" alt="Project Information" />
      <a href="http://projects.eclipse.org/projects/rt.rap">About this project</a>
    </div>
  </div>

  <div id="header-bar">

<div id="header">

  <div  id="rap-logo-deco"></div>
  <a href="../index.html"><span id="rap-logo"></span></a>

  <div id="rap-search-box">
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-1" viewBox="0 0 40 40">
        <path d="M27.6 29.15c-1.99 1.643-4.543 2.63-7.326 2.63-6.355 0-11.507-5.15-11.507-11.506 0-6.355 5.152-11.507 11.507-11.507 6.355 0 11.507 5.152 11.507 11.507 0 2.783-.987 5.335-2.63 7.325l7.392 7.392c.43.43.436 1.124.005 1.555-.428.428-1.122.428-1.555-.005L27.6 29.15zm-7.326.44c5.145 0 9.315-4.17 9.315-9.316 0-5.145-4.17-9.315-9.316-9.315-5.145 0-9.315 4.17-9.315 9.314 0 5.145 4.17 9.315 9.314 9.315zm16.813.81C38.982 27.292 40 23.72 40 20 40 8.954 31.046 0 20 0S0 8.954 0 20s8.954 20 20 20c3.76 0 7.37-1.04 10.5-2.974.514-.32.674-.994.355-1.51-.318-.514-.993-.673-1.508-.355C26.56 36.884 23.35 37.81 20 37.81c-9.835 0-17.808-7.973-17.808-17.808S10.165 2.192 20 2.192 37.808 10.165 37.808 20c0 3.314-.905 6.492-2.593 9.26-.315.515-.15 1.19.365 1.505.517.315 1.19.152 1.507-.365z"
        fill-rule="evenodd" />
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-3" viewBox="0 0 20 20">
        <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z" fill-rule="evenodd" />
      </symbol>
    </svg>
    <form id="sbx-form" action="data-stores.html#" novalidate="novalidate" class="searchbox sbx-custom">
      <div role="search" class="sbx-custom__wrapper">
        <input id="search-query" type="search" name="search" placeholder="Search..." autocomplete="off" required="required" class="sbx-custom__input">
        <button type="submit" title="Submit your search query." class="sbx-custom__submit">
          <svg role="img" aria-label="Search">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-1"></use>
          </svg>
        </button>
        <button type="button" id="sbx-remove" title="Clear the search query." class="sbx-custom__reset">
          <svg role="img" aria-label="Reset">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use>
          </svg>
        </button>
      </div>
    </form>
  </div>

  <div id="navigation">
    <ul>

<li ><a href="../demos/index.html">Demos</a></li><li ><a href="../downloads/index.html">Download</a></li><li class="active"><a href="../documentation/index.html">Documentation</a></li><li ><a href="../getting-involved/index.html">Community</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>

<div id="nav-bar">
  <div id="nav-container">
    <ul  id="nav-home">
      <li>
        <a href="../index.html">&lt; Home</a>
      </li>
    </ul>
    <ul id="nav">

<li><a  href="../documentation/index.html">Overview</a></li><li><a  class="active" href="index.html">Developer's Guide</a></li><li><a  href="../noteworthy/index.html">New and Noteworthy</a></li><li><a  href="../articles/index.html">Articles</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>
  </div>
  <div id="novaWrapper">
    <div id="novaContent">

<div id="midcolumn" class="dev-guide-content">


  

  <h1>Storing Data</h1>

  <p>
    There are cases where an object must be stored in a place that can be
    accessed by different parts of an application.
    For example, an application may store information about the user that is currently logged in,
    or a selection that the user has made and that affects different parts of the application.
    But there are also instances that should be shared between all users,
    for example actual whether data in a flight control system, or a cache for results of frequent calculations.
  </p>
  <p>
    When storing those data in RAP, it's important to take into account that the Java VM and the
    file system are shared by multiple users and perhaps even different RAP applications.
    Thus, the classical <em>Singleton</em> approach <a href="singletons.html">should not be used in RAP</a>.
    <!-- Also data kept in temporary files might not be a good idea.-->
    When there are multiple users and applications, data must be stored in a place that is suitable
    for its <a href="scopes.html">scope</a>.
    RAP provides basic data stores for the different scopes.
  </p>

  <h3>Application-wide (shared) data</h3>
  <p>
    Especially when an application must handle a lot of parallel user sessions, it's crucial to
    limit the memory and CPU cycles consumed by a single UI session.
    Depending on the application, it may be a good idea to <em>share</em> instances of objects that are not user-specific
    between all users instead of creating an equivalent instance for every single UI session.
  </p>
  <p>
    An application can store those shared objects as attributes in the
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/ApplicationContext.html">ApplicationContext</a></em>.
    This makes them accessible for all UI sessions within the application.
    But in contrast to singletons, the objects won't be available in a different application.
    When the application is stopped, the application context is cleared and the shared instances
    can be cleaned up by the garbage collector.
  </p>

  <h3>UI-specific data</h3>
  <p>
    Some shared information are only valid for the current instance of the entrypoint,
    i.e. the current UI session.
    As an example, in a call center application, the customer record that is currently selected
    is only valid for the current UI session.
    At the same time, another agent is talking to another customer.
  </p>
  <p>
    Those objects can be stored as attributes in the
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/UISession.html">UISession</a></em>.
    The attributes of a UI session will be cleaned up when the UISession ends.
  </p>

  <h3>User-specific data</h3>
  <p>
    When a user reloads the page in the browser or switches to another entrypoint, a new UI session
    is created.
    All information that was stored in the previous UISession is lost.
    But it's still the same user.
    Most applications will remember the user and not ask for a login again.
  </p>
  <p>
    As usual in web applications, information about the current user should be stored in the
    <em>HttpSession</em>.
    RAP applications can access the HttpSession using <em>UISession#getHttpSession()</em>.
  </p>

  <h3>Persistent User Settings</h3>
  <p>
    Some applications allow their users to do certain customizations such as choosing between metric vs. imperial units.
    Those user settings should be preserved for a longer period of time.
    RAP provides a simple persistent store for this kind of settings, the
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/SettingStore.html">SettingStore</a></em>.
    The setting store identifies a returning user by means of a cookie.
    The default implementation stores settings in Java .properties files on disk, but the mechanism
    also allows for custom implementations:
  </p>
<pre class="lang-java">
public class SimpleConfiguration implements ApplicationConfiguration {

  public void configure( Application application ) {
    ...
    application.setSettingStoreFactory( new MyDatabaseSettingStoreFactory() );
    ...
  }

}
</pre>
  <p>
    An instance can be obtained from <em>RWT.getSettingStore()</em>.
    In contrast to the other stores, the setting store can only keep strings, not arbitrary objects.
  </p>
  <p>
    Note that the settings store relies on cookies, which may be deleted or disabled by the user.
    It is also possible to identify the user by any other means and use the method
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/SettingStore.html#loadById-java.lang.String-">loadById</a></em>
    to initialize the setting store from preserved data.
  </p>
<pre class="lang-java">
public class MyDatabaseSettingStoreFactory implements SettingStoreFactory {

  public SettingStore createSettingStore( String storeId ) {
    SettingStore result = new MyDatabaseSettingStore();
    try {
      result.loadById( storeId );
    } catch( Exception exception ) {
      // exception handling
    }
    return result;
  }

}
</pre>

  <h3>Overview</h3>
  <table border="1" cellpadding="3" cellspacing="0"><tr><th align="left">Interface / Instance</th>
      <th align="left">Scope</th>
      <th align="left">used for</th>
      <th align="left">life span</th>
    </tr><tr><td>
        <em><strong><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/ApplicationContext.html">ApplicationContext</a></strong></em><br /><br /><em>RWT.getApplicationContext()</em>
      </td>
      <td>
        application
      </td>
      <td>
        instances shared between all users of an application
      </td>
      <td>
        entire lifetime of the application,
        cleared when application is stopped
      </td>
    </tr><tr><td>
        <em><strong><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/UISession.html">UISession</a></strong></em><br /><br />
        RWT.getUISession()
      </td>
      <td>
        UI session
      </td>
      <td>
        instances specific to the current UI session
      </td>
      <td>
        execution of a single entrypoint instance,
        cleared when UI session expires
      </td>
    </tr><tr><td>
        <em><strong>HttpSession</strong></em> (Servlet API)<br /><br /><em>RWT.getUISession()<br />.getHttpSession()</em>
      </td>
      <td>
        user
      </td>
      <td>
        user-specific information
      </td>
      <td>
        Http session, cleared on session timeout
      </td>
    </tr><tr><td>
        <em><strong><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/service/SettingStore.html">SettingStore</a></strong></em><br /><br /><em>RWT.getSettingStore()</em>
      </td>
      <td>
        user (persistent)
      </td>
      <td>
        Persistent user settings (Strings)
      </td>
      <td>
        never, cookie lasts 3 month by default
      </td>
    </tr></table><p>
    All these data stores have at least the three methods <em>setAttribute</em>,
    <em>getAttribute</em> and <em>removeAttribute</em>.
  </p>
  <p>
    Please keep in mind that these data stores keep data in memory and are not suited for large or
    sensitive data structures.
  </p>
  <p>
    A reference to any of these data stores can only be obtained in the the context of a UISession.
    That is, they are directly accessible from a UI thread, but background threads need to execute
    code in the context of a UI session (see <a href="threads.html">Threads in RAP</a>).
  </p>



</div>

<div id="rightcolumn">
  <a style = "color:inherit;text-decoration:none;"
    href="index.html">
  <h2 style="padding-bottom:12px;">Contents / RAP 4.1</h2></a>

  <ul id="dev-guide-nav"><li class="category-group"><span><span class="arrow"></span>Getting Started</span><ul><li><a href="setup-ide.html">Setting up the Eclipse IDE</a></li><li><a href="target-install.html">Installing a RAP Target</a></li><li><a href="hello-world.html">Creating a Hello World with RAP</a></li><li><a href="launcher.html">Launching RAP Applications from the IDE</a></li><li><a href="examples.html">RAP Examples</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>RAP Widget Toolkit</span><ul><li><a href="rwt.html">Differences between RWT and SWT</a></li><li><a href="client.html">The RAP Client</a></li><li><a href="key-and-mouse-events.html">Key and Mouse Event Handling</a></li><li><a href="tree-table.html">Tree, Table and the Nebula Grid</a></li><li><a href="markup.html">Fonts and Markup in RAP</a></li><li><a href="web-embedding.html">Embedding Web Components</a></li><li><a href="navigation.html">Browser Navigation and History</a></li><li><a href="file-upload.html">File Upload</a></li><li><a href="theming.html">RWT Theming</a></li><li><a href="custom-widget.html">Custom Widgets</a></li><li><a href="scripting.html">Scripting</a></li><li><a href="resources.html">Static Resources and Downloads</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Scopes and Threads in RAP</span><ul><li><a href="scopes.html">Scopes in RAP</a></li><li><a href="singletons.html">Singletons and Static Fields</a></li><li><a class="active" href="data-stores.html">Storing Data</a></li><li><a href="threads.html">Threads in RAP</a></li><li><a href="server-push.html">Server Push</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Building Applications</span><ul><li><a href="application-setup.html">Choosing an Application Setup</a></li><li><a href="application-configuration.html">Application Configuration</a></li><li><a href="branding.html">Branding</a></li><li><a href="rwt-standalone.html">RWT Standalone</a></li><li><a href="deployment.html">WAR Deployment</a></li><li><a href="look-and-feel.html">Look and Feel</a></li><li><a href="internationalization.html">Internationalization</a></li><li><a href="related-technologies.html">Related Technologies</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Reference</span><ul><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/overview-summary.html">API Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/extension-points/index.html">RAP Extension Points Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/theming/index.html">RAP Theming Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/jsdoc/index.html">RAP WebClient API Reference</a></li></ul></li></ul></div>

<script type="text/javascript">
  $( 'ul#dev-guide-nav li.category-group ul' ).each( function() {
    if( !$( this ).find( '.active' ).attr( 'class' ) ) {
      $( this ).hide();
      $( this ).addClass( 'hidden' );
    } else {
      $( this ).siblings( 'span' ).children( 'span' ).addClass( 'opened' );
    }
  } );
  $( 'ul#dev-guide-nav li.category-group span' ).click( function() {
    var navList = $( this ).siblings( 'ul' );
    var arrow = $( this ).children( 'span' );
    if( navList.hasClass( 'hidden' ) ) {
      navList.slideDown();
      navList.removeClass( 'hidden' );
      arrow.addClass( 'opened' );
    } else {
      navList.slideUp();
      navList.addClass( 'hidden' );
      arrow.removeClass( 'opened' );
    }
  } );
</script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-910670-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17128428-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>      <div class="stop"></div>
      <div id="footer">
        <ul id="footernav">
          <li><a href="https://www.eclipse.org/">Eclipse</a></li>
          <li><a href="https://www.eclipse.org/legal/privacy/">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/terms-of-use/">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright/">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
        </ul>
        <a href="https://www.eclipse.org/"><img src="../images/logos/eclipse.png" alt="Eclipse logo" /></a>
        <span id="copyright">Copyright &copy; 2025 The Eclipse Foundation. All Rights Reserved.</span>
      </div>

    </div>
  </div>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: '3e9946bc18fa7d26dc03c883df41b9de',
      indexName: 'eclipse_rap',
      inputSelector: '#search-query',
      algoliaOptions: {
        hitsPerPage: 9,
      }
    });
    $( function() {
      // prettify rewrites <pre> and <code> elements with class="prettyprint"
      // optionally, the language can be selected using a "lang-" prefixed class, e.g. lang-java
      $( 'pre[class|="lang"],code[class|="lang"]' ).addClass( "prettyprint" );
      $( "pre[lang],code[lang]" ).addClass( function() {
        var lang = $( this ).attr( "lang" );
        return "prettyprint" + ( lang ? " lang-" + lang : "" );
      } );
      prettyPrint();
    } );
  </script>
</body>
</html>
