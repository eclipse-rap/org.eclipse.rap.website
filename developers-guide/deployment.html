<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>RAP - Developer's Guide</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="keywords" content="rap, rwt, osgi, eclipse, equinox, eclipse rap, ajax" />
  <meta name="google-site-verification" content="kMX1SI1MRFpyzEPh4yv_TXRUpKLmBVvENEfQtjdZuwI" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" type="text/css" href="../_theme/reset.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/layout.css" media="screen" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/index-search-box.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/devguide.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="../_theme/prettify/prettify.css" />
  <!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="/rap/rap-layout-fixes-ie.css"/><![endif]-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="../script.js"></script>
  <script type="text/javascript" src="../_theme/prettify/prettify.js"></script>
  <script type="text/javascript" src="../_theme/prettify/lang-css.js"></script>
  <style type="text/css">
    input::-ms-clear, input::-ms-reveal {
      display: none;
    }
  </style>
</head>
<body>

  <div id="info-box">
    <div>
      <img src="../images/twitter.png" alt="Twitter Logo" />
      <a href="https://twitter.com/EclipseRAP/">Follow us on Twitter</a>
    </div>
    <div>
      <img src="../images/project-stats.png" alt="Project Information" />
      <a href="http://projects.eclipse.org/projects/rt.rap">About this project</a>
    </div>
  </div>

  <div id="header-bar">

<div id="header">

  <div  id="rap-logo-deco"></div>
  <a href="../index.html"><span id="rap-logo"></span></a>

  <div id="rap-search-box">
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-1" viewBox="0 0 40 40">
        <path d="M27.6 29.15c-1.99 1.643-4.543 2.63-7.326 2.63-6.355 0-11.507-5.15-11.507-11.506 0-6.355 5.152-11.507 11.507-11.507 6.355 0 11.507 5.152 11.507 11.507 0 2.783-.987 5.335-2.63 7.325l7.392 7.392c.43.43.436 1.124.005 1.555-.428.428-1.122.428-1.555-.005L27.6 29.15zm-7.326.44c5.145 0 9.315-4.17 9.315-9.316 0-5.145-4.17-9.315-9.316-9.315-5.145 0-9.315 4.17-9.315 9.314 0 5.145 4.17 9.315 9.314 9.315zm16.813.81C38.982 27.292 40 23.72 40 20 40 8.954 31.046 0 20 0S0 8.954 0 20s8.954 20 20 20c3.76 0 7.37-1.04 10.5-2.974.514-.32.674-.994.355-1.51-.318-.514-.993-.673-1.508-.355C26.56 36.884 23.35 37.81 20 37.81c-9.835 0-17.808-7.973-17.808-17.808S10.165 2.192 20 2.192 37.808 10.165 37.808 20c0 3.314-.905 6.492-2.593 9.26-.315.515-.15 1.19.365 1.505.517.315 1.19.152 1.507-.365z"
        fill-rule="evenodd" />
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-3" viewBox="0 0 20 20">
        <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z" fill-rule="evenodd" />
      </symbol>
    </svg>
    <form id="sbx-form" action="deployment.html#" novalidate="novalidate" class="searchbox sbx-custom">
      <div role="search" class="sbx-custom__wrapper">
        <input id="search-query" type="search" name="search" placeholder="Search..." autocomplete="off" required="required" class="sbx-custom__input">
        <button type="submit" title="Submit your search query." class="sbx-custom__submit">
          <svg role="img" aria-label="Search">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-1"></use>
          </svg>
        </button>
        <button type="button" id="sbx-remove" title="Clear the search query." class="sbx-custom__reset">
          <svg role="img" aria-label="Reset">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use>
          </svg>
        </button>
      </div>
    </form>
  </div>

  <div id="navigation">
    <ul>

<li ><a href="../demos/index.html">Demos</a></li><li ><a href="../downloads/index.html">Download</a></li><li class="active"><a href="../documentation/index.html">Documentation</a></li><li ><a href="../getting-involved/index.html">Community</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>

<div id="nav-bar">
  <div id="nav-container">
    <ul  id="nav-home">
      <li>
        <a href="../index.html">&lt; Home</a>
      </li>
    </ul>
    <ul id="nav">

<li><a  href="../documentation/index.html">Overview</a></li><li><a  class="active" href="index.html">Developer's Guide</a></li><li><a  href="../noteworthy/index.html">New and Noteworthy</a></li><li><a  href="../articles/index.html">Articles</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>
  </div>
  <div id="novaWrapper">
    <div id="novaContent">

<div id="midcolumn" class="dev-guide-content">


  

  <h1>Deploying a RAP Application to a Servlet Container</h1>

  <p>
    The following tutorial shows how to create a <em>WAR</em> file that contains the
    <em>org.eclipse.rap.demo</em> project as a RAP application.
  </p>

  <p>
    Note: As with RCP applications there are a wide variety of possible configurations.
    What's given in this tutorial is just one possibility.
  </p>

  <p>
    As prerequisites we assume that you:
  </p>
  <ul><li>
      are familiar with the bundles- and build information section of the
      <a href="https://www.eclipse.org/equinox/server/http_in_container.php">
      Equinox in a Servlet Container</a> document.
    </li>
    <li>
      have installed the WAR Products tooling from this p2 repository
      <a href="http://download.eclipse.org/releases/kepler/">http://download.eclipse.org/releases/kepler/</a>
      into your IDE. This tooling is part of <a href="http://eclipse.org/libra/">Libra</a> and not
      part of RAP. Anyway it can be used to deploy RAP applications in a very comfortable way.
    </li>
    <li>
      have set a target platform that contains RAP.
    </li>
  </ul><h3>Import org.eclipse.rap.demo into your workspace</h3>
  <ul><li>
      Open the <em class="UILabel">Plug-ins</em> view.
    </li>
    <li>
      Select the <em>org.eclipse.rap.demo</em> plug-in and use the command
      <em class="UILabel">Import As</em> &gt; <em class="UILabel">Source Project</em> from the context menu to import
      <em>org.eclipse.rap.demo</em> as a project in your workspace.
    </li>
  </ul><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/import_rap_demo.png" alt="Import RAP demo project" /><h3>Create a .warproduct configuration</h3>
  <p>
    Building a <em>WAR</em> file using the WAR Products tooling is centered around
    a <em>.warproduct</em> configuration. The <em>.warproduct</em> configuration is
    entirely managed by the WAR Products tooling to simplify war deployment. It's format
    is internal and is not intended to be read by tools other than the WAR Products tooling.
    To create a <em>.warproduct</em> configuration you can use a working launch
    configuration. Follow these steps to create a <em>rapdemo.warproduct</em>
    configuration for the RAP demo application:
  </p>
  <ul><li>
      Open the <em class="UILabel">New WAR Product Configuration</em> wizard.<br /><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/war_product_wizard.png" alt="WAR product wizard" /></li>
    <li>
      Enter a name for the  war configuration file and select the
      <em>RAP Workbench Demo</em> from the available launch configurations.<br /><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/war_product_configuration.png" alt="WAR product configuration" /></li>
  </ul><h3>The rapdemo.warproduct configuration</h3>
  <p>
    WAR Products tooling provides a form-based multi-page editor to manage a
    <em>.warproduct</em> configuration. The editor has the following pages:
  </p>
  <ul><li>
      <em class="UILabel">Overview</em>: on this page you can enter additional information
      like <em>ID</em>, <em>Name</em>, <em>Version</em> but they are not
      needed to export a war archive. Also the <em class="UILabel">WAR Product export</em> wizard
      can be started from the <em class="UILabel">Overview page</em>.<br /><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/war_product_editor.png" alt="WAR Product editor" /></li>
    <li>
      <em class="UILabel">Configuration</em>: Here you can manage which plug-ins and libraries
      to be included into the war archive.<br /><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/war_product_editor_configuration.png" alt="WAR Product editor configuration" /></li>
    <li>
      <em class="UILabel">web.xml</em>: On this page the web.xml of the war archive can be edited.<br /><img src="http://download.eclipse.org/rt/rap/doc/4.1/guide/articles/./../images/war_product_editor_webxml.png" alt="WAR Product editor web.xml" /></li>
  </ul><h3>Create the WAR archive</h3>
  <p>
    From the <em class="UILabel">Overview</em> page of the <em>.warproduct</em> configuration
    editor start the <em class="UILabel">WAR Product export</em> wizard (this can also be reached by launching
    the general Export Wizard), enter the location for the war
    archive and press <em class="UILabel">Finish</em> if no validation errors exist. After that you can deploy
    the <em>WAR</em> file to a servlet container. See the uncommented sections in the <em>web.xml</em>
    for more information on how to activate the OSGi-console. This is useful if you run into troubles
    while deploying the generated WAR file.
  </p>

  <h2>How to deploy my own application?</h2>

  <p>
    To deploy your own application like described above you will have
    to create your own <em>.warproduct</em> configuration. The configuration
    should contain the same plug-in references as the <em>rapdemo.configuration</em>
    (except the demo-plug-in of course!) plus the plug-ins that make up your application.
    It is important that your plug-ins reference the Servlet API by using the
    <em>Import-Package</em> directive instead of the <em>Require-Bundle</em>
    directive. See the <em>MANIFEST.MF</em> of the demo project for an example.
  </p>

  <p>
    <strong>Note</strong>: Besides the application server log files
    there also exists an Equinox framework log that can be found under the webapp's
    work directory, e.g. on Tomcat:
  </p>
  <pre>
&lt;tomcat-installation&gt;/work/Catalina/localhost/demo/eclipse/workspace/.metadata/.log </pre>

  <p>
  In case Equinox isn't able to start at all, you may also look for log files
  at:
  </p>
  <pre>
&lt;tomcat-installation&gt;/work/Catalina/localhost/demo/eclipse/configuration </pre>

  <h2>Troubleshooting</h2>

  <p>
    You can use the following checklist to find errors when your exported application does not work:
  </p>

  <ul><li>Check your <em>build.properties</em> file
      <ul><li>Are you exporting the <em>plugin.xml</em>?</li>
        <li>If you are using <em>plugin.properties</em> files, make sure
          they are exported.</li>
        <li>Are all libraries you are using listed on the plug-ins class path?</li>
        <li>Tip: As PDE build sometimes swallows error messages try exporting
          your feature with <em>Deployable Feature</em> export, this may turn up
          error messages.</li>
      </ul></li>
    <li>
      Enable the OSGi console by adding this init-param to the <em>web.xml</em>:
      <pre class="lang-xml">
&lt;init-param&gt;
  &lt;param-name&gt;commandline&lt;/param-name&gt;
  &lt;param-value&gt;-console&lt;/param-value&gt;
&lt;/init-param&gt;</pre>
      <ul><li>You can add a port after <em>-console</em> and then telnet to
          the OSGi console: <br /><code>telnet localhost &lt;port&gt;</code>.</li>
        <li>Type <code>ss</code> in the console and see if all bundles are
          started. If not try starting them with
          <code>start &lt;bundle-id&gt;</code>.
          The stack traces may hint to what is missing.</li>
        <li>Make sure that there is a
        <em>org.eclipse.equinox.servletbridge.extensionbundle</em> in
        the <code>ss</code>-listing who's state is <code>RESOVLED</code>.</li>
      </ul></li>
    <li>
      Make sure that the WAR does <b>not</b> contain the
      <em>javax.servlet</em> bundle.
      In the plug-in manifest the <em>javax.servlet</em> <b>must</b> be
      listed in the <em class="UILabel">Import-Package</em> section, not in
      <em class="UILabel">Require-Bundle</em>.</li>
    <li>
      Make sure that the WAR does <b>not</b> contain the
      <em>org.eclipse.update.configurator</em> bundle.</li>
    <li>
      Does the WAR contain compile errors?
      If so, you will probably find a zip archive somewhere in your output
      folder. It contains log files with the compiler output.</li>
    <li>
      Use the product export to validate your feature:
      <ul><li>
          Create a product configuration with an arbitrary
          name (<em>File &gt; New &gt; Other &gt; Product Configuration</em>).
        </li>
        <li>
          Select <q>The product configuration is based on <em>features</em></q>
          on the <em>Overview</em> page.</li>
        <li>
          Add your feature to the list of features on the <em>Dependencies</em> page.
        </li>
        <li>
          Press the <em>Validate</em> button in the top-left corner of the editor.
          Ignore complaints about missing <em>javax.servlet</em> packages.
          Be aware that unresolved optional dependencies aren't reported as errors.
        </li>
      </ul></li>
    <li>
      If you are re-deploying, make sure to delete the work directory of your
      servlet engine (e.g.
      <code>&lt;tomcat_install&gt;/work/Catalina/localhost/&lt;webapp_name&gt;</code>
      in Tomcat).
    </li>
  </ul><p>
    Further hints can be found in the <a href="http://wiki.eclipse.org/RAP/FAQ">RAP FAQ</a>
  </p>



</div>

<div id="rightcolumn">
  <a style = "color:inherit;text-decoration:none;"
    href="index.html">
  <h2 style="padding-bottom:12px;">Contents / RAP 4.1</h2></a>

  <ul id="dev-guide-nav"><li class="category-group"><span><span class="arrow"></span>Getting Started</span><ul><li><a href="setup-ide.html">Setting up the Eclipse IDE</a></li><li><a href="target-install.html">Installing a RAP Target</a></li><li><a href="hello-world.html">Creating a Hello World with RAP</a></li><li><a href="launcher.html">Launching RAP Applications from the IDE</a></li><li><a href="examples.html">RAP Examples</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>RAP Widget Toolkit</span><ul><li><a href="rwt.html">Differences between RWT and SWT</a></li><li><a href="client.html">The RAP Client</a></li><li><a href="key-and-mouse-events.html">Key and Mouse Event Handling</a></li><li><a href="tree-table.html">Tree, Table and the Nebula Grid</a></li><li><a href="markup.html">Fonts and Markup in RAP</a></li><li><a href="web-embedding.html">Embedding Web Components</a></li><li><a href="navigation.html">Browser Navigation and History</a></li><li><a href="file-upload.html">File Upload</a></li><li><a href="theming.html">RWT Theming</a></li><li><a href="custom-widget.html">Custom Widgets</a></li><li><a href="scripting.html">Scripting</a></li><li><a href="resources.html">Static Resources and Downloads</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Scopes and Threads in RAP</span><ul><li><a href="scopes.html">Scopes in RAP</a></li><li><a href="singletons.html">Singletons and Static Fields</a></li><li><a href="data-stores.html">Storing Data</a></li><li><a href="threads.html">Threads in RAP</a></li><li><a href="server-push.html">Server Push</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Building Applications</span><ul><li><a href="application-setup.html">Choosing an Application Setup</a></li><li><a href="application-configuration.html">Application Configuration</a></li><li><a href="branding.html">Branding</a></li><li><a href="rwt-standalone.html">RWT Standalone</a></li><li><a class="active" href="deployment.html">WAR Deployment</a></li><li><a href="look-and-feel.html">Look and Feel</a></li><li><a href="internationalization.html">Internationalization</a></li><li><a href="related-technologies.html">Related Technologies</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Reference</span><ul><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/overview-summary.html">API Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/extension-points/index.html">RAP Extension Points Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/theming/index.html">RAP Theming Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/jsdoc/index.html">RAP WebClient API Reference</a></li></ul></li></ul></div>

<script type="text/javascript">
  $( 'ul#dev-guide-nav li.category-group ul' ).each( function() {
    if( !$( this ).find( '.active' ).attr( 'class' ) ) {
      $( this ).hide();
      $( this ).addClass( 'hidden' );
    } else {
      $( this ).siblings( 'span' ).children( 'span' ).addClass( 'opened' );
    }
  } );
  $( 'ul#dev-guide-nav li.category-group span' ).click( function() {
    var navList = $( this ).siblings( 'ul' );
    var arrow = $( this ).children( 'span' );
    if( navList.hasClass( 'hidden' ) ) {
      navList.slideDown();
      navList.removeClass( 'hidden' );
      arrow.addClass( 'opened' );
    } else {
      navList.slideUp();
      navList.addClass( 'hidden' );
      arrow.removeClass( 'opened' );
    }
  } );
</script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-910670-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17128428-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>      <div class="stop"></div>
      <div id="footer">
        <ul id="footernav">
          <li><a href="https://www.eclipse.org/">Eclipse</a></li>
          <li><a href="https://www.eclipse.org/legal/privacy/">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/terms-of-use/">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright/">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
        </ul>
        <a href="https://www.eclipse.org/"><img src="../images/logos/eclipse.png" alt="Eclipse logo" /></a>
        <span id="copyright">Copyright &copy; 2024 The Eclipse Foundation. All Rights Reserved.</span>
      </div>

    </div>
  </div>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: '3e9946bc18fa7d26dc03c883df41b9de',
      indexName: 'eclipse_rap',
      inputSelector: '#search-query',
      algoliaOptions: {
        hitsPerPage: 9,
      }
    });
    $( function() {
      // prettify rewrites <pre> and <code> elements with class="prettyprint"
      // optionally, the language can be selected using a "lang-" prefixed class, e.g. lang-java
      $( 'pre[class|="lang"],code[class|="lang"]' ).addClass( "prettyprint" );
      $( "pre[lang],code[lang]" ).addClass( function() {
        var lang = $( this ).attr( "lang" );
        return "prettyprint" + ( lang ? " lang-" + lang : "" );
      } );
      prettyPrint();
    } );
  </script>
</body>
</html>
