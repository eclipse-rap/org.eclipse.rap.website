<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>RAP - Developer's Guide</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="keywords" content="rap, rwt, osgi, eclipse, equinox, eclipse rap, ajax" />
  <meta name="google-site-verification" content="kMX1SI1MRFpyzEPh4yv_TXRUpKLmBVvENEfQtjdZuwI" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" type="text/css" href="../_theme/reset.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/layout.css" media="screen" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/index-search-box.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/devguide.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="../_theme/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="../_theme/prettify/prettify.css" />
  <!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="/rap/rap-layout-fixes-ie.css"/><![endif]-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="../script.js"></script>
  <script type="text/javascript" src="../_theme/prettify/prettify.js"></script>
  <script type="text/javascript" src="../_theme/prettify/lang-css.js"></script>
  <style type="text/css">
    input::-ms-clear, input::-ms-reveal {
      display: none;
    }
  </style>
</head>
<body>

  <div id="info-box">
    <div>
      <img src="../images/twitter.png" alt="Twitter Logo" />
      <a href="https://twitter.com/EclipseRAP/">Follow us on Twitter</a>
    </div>
    <div>
      <img src="../images/project-stats.png" alt="Project Information" />
      <a href="http://projects.eclipse.org/projects/rt.rap">About this project</a>
    </div>
  </div>

  <div id="header-bar">

<div id="header">

  <div  id="rap-logo-deco"></div>
  <a href="../index.html"><span id="rap-logo"></span></a>

  <div id="rap-search-box">
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-1" viewBox="0 0 40 40">
        <path d="M27.6 29.15c-1.99 1.643-4.543 2.63-7.326 2.63-6.355 0-11.507-5.15-11.507-11.506 0-6.355 5.152-11.507 11.507-11.507 6.355 0 11.507 5.152 11.507 11.507 0 2.783-.987 5.335-2.63 7.325l7.392 7.392c.43.43.436 1.124.005 1.555-.428.428-1.122.428-1.555-.005L27.6 29.15zm-7.326.44c5.145 0 9.315-4.17 9.315-9.316 0-5.145-4.17-9.315-9.316-9.315-5.145 0-9.315 4.17-9.315 9.314 0 5.145 4.17 9.315 9.314 9.315zm16.813.81C38.982 27.292 40 23.72 40 20 40 8.954 31.046 0 20 0S0 8.954 0 20s8.954 20 20 20c3.76 0 7.37-1.04 10.5-2.974.514-.32.674-.994.355-1.51-.318-.514-.993-.673-1.508-.355C26.56 36.884 23.35 37.81 20 37.81c-9.835 0-17.808-7.973-17.808-17.808S10.165 2.192 20 2.192 37.808 10.165 37.808 20c0 3.314-.905 6.492-2.593 9.26-.315.515-.15 1.19.365 1.505.517.315 1.19.152 1.507-.365z"
        fill-rule="evenodd" />
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-3" viewBox="0 0 20 20">
        <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z" fill-rule="evenodd" />
      </symbol>
    </svg>
    <form id="sbx-form" action="web-embedding.html#" novalidate="novalidate" class="searchbox sbx-custom">
      <div role="search" class="sbx-custom__wrapper">
        <input id="search-query" type="search" name="search" placeholder="Search..." autocomplete="off" required="required" class="sbx-custom__input">
        <button type="submit" title="Submit your search query." class="sbx-custom__submit">
          <svg role="img" aria-label="Search">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-1"></use>
          </svg>
        </button>
        <button type="button" id="sbx-remove" title="Clear the search query." class="sbx-custom__reset">
          <svg role="img" aria-label="Reset">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use>
          </svg>
        </button>
      </div>
    </form>
  </div>

  <div id="navigation">
    <ul>

<li ><a href="../demos/index.html">Demos</a></li><li ><a href="../downloads/index.html">Download</a></li><li class="active"><a href="../documentation/index.html">Documentation</a></li><li ><a href="../getting-involved/index.html">Community</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>

<div id="nav-bar">
  <div id="nav-container">
    <ul  id="nav-home">
      <li>
        <a href="../index.html">&lt; Home</a>
      </li>
    </ul>
    <ul id="nav">

<li><a  href="../documentation/index.html">Overview</a></li><li><a  class="active" href="index.html">Developer's Guide</a></li><li><a  href="../noteworthy/index.html">New and Noteworthy</a></li><li><a  href="../articles/index.html">Articles</a></li>
    </ul>
    <div class="stop"></div>
  </div>
</div>
  </div>
  <div id="novaWrapper">
    <div id="novaContent">

<div id="midcolumn" class="dev-guide-content">


  

  <h1>Embedding Web-Components</h1>

  <h2>Browser Widget Overview</h2>

  <p>
    Using the SWT/RWT
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html">Browser</a></em>
    widget, it is possible to embed HTML pages, simple JavaScript
    Applications, Flash-Objects, Java-Applets or any other web component seamlessly into your
    RAP (or SWT) application.
  </p>

  <p>
    In RAP, any HTML document (including JavaScript) placed in a <em>Browser</em> widget
    will end up in an <em>iframe</em> element. You can call JavaScript from Java by using
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#evaluate-java.lang.String-">evaluate</a></em>,
    and vice versa using the
    <code>BrowserFunction</code>
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/BrowserFunction.html">BrowserFunction</a></em>
    class.
    It's recommended
    to always use <em>evaluate</em> instead of
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#execute-java.lang.String-">execute</a></em>,
    since it throws an exception if the JavaScript execution fails.
    Before you can use <em>evaluate</em>, you must wait until the document is fully loaded,
    using either a
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#addProgressListener-org.eclipse.swt.browser.ProgressListener-">ProgressListener</a></em>
    or a <em>BrowserFunction</em>.
  </p>

  <h2 id="notes">RAP-specific notes</h2>
  <h3 id="alt">Alternatives</h3>
  <p>
    The Browser-Widget is suitable for embedding complete HTML documents and very simple web apps.
    When you only want to display a few lines of rich/formatted text, use the more lightweight
    <a href="markup.html#markup">markup</a> feature instead. Also, keep in mind that each call
    to a <em>BrowserFunction</em> or to <em>evaluate</em> creates an HTTP request.
    To reduce the resulting traffic you can try combining subsequent call, but if you want to embed
    a web app/object that requires a lot of client-server communication, consider using
    the more efficient
    <a href="custom-widget.html#native">RAP Remote API</a>.
    <b>Note</b>, however, that
    both, markup and the JavaScript Remote API, are features of the RAP <a href="client.html">web client</a>,
    and are not available in SWT or on other clients.
    If SWT-Support is a requirement, use the <em>Brower</em> widget in any case.
  </p>

  <h3 id="security">Browser security restrictions</h3>
  <p>
    Since the browser widget is based on the HTML <em>iframe</em> element,
    all security restrictions regarding cross-frame-scripting apply. This means for
    <em>execute</em>, <em>evaluate</em> and <em>BrowserFunction</em> to work,
    the document loaded in the browser widget has to come from the
    same domain and port that the RAP application is loaded from. This is automatically given
    if the
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#setText-java.lang.String-">setText</a></em>
    method is used, or the file is registered as a <a href="web-embedding.html#resources">static resource</a>.
    <br /></p>

  <h3 id="resources">Resources</h3>
  <p>
    It's important to decide how your resources (HTML, JavaScript, CSS and image files) are
    provided to the browser widget. If you use only a moderate amount of HTML with inlined
    JavaScript and/or CSS (and <i>no images</i>), or your non-HTML resources can be loaded from
    a different HTTP-server, it will suffice to use the
    <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#setText-java.lang.String-">setText</a></em>
    method of the browser
    widget. This code would then also run in an SWT application. However, when using
    <em>setText</em>, the client browser can not cache the loaded document, so each new instance has
    to load and parse it again.
    A good example of a custom widget using this strategy is the
    <em>Browser</em>-based <a href="https://github.com/eclipsesource/rap-gmap">
    Google Maps widget</a>. It runs in SWT and in RAP.
    When a not all resources can be inlined in the HTML file (like images), and they are to be
    provided by the RAP application itself, it is necessary to register them as
    <a href="resources.html">static resources</a>.
  </p>

  <h3>Limitations in JEE Mode</h3>
  <p>
      When using the
      <a href="application-setup.html#compat">JEE compatibility</a>
      <a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/rap/rwt/application/Application.OperationMode.html">OperationMode</a>
      (the default for non-workbench based applications), then
      the <em>executeScript</em> and <em>evaluate</em> methods will not block program
      execution.
      Like with dialogs, a RAP-only method
      <em><a href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/org/eclipse/swt/browser/Browser.html#evaluate-java.lang.String-org.eclipse.rap.rwt.widgets.BrowserCallback-">evaluate(String, BrowserCallback)</a></em>,
      is available, which lets you register a callback to receive the results of the <em>evaluate</em>
      call. However, this pattern makes implementing a traditional "getter" impossible.
      In <a href="application-setup.html#compat">SWT compatibility</a> mode you can write:
    </p>
    <pre class="lang-java">
public String getText() {
  // assuming the web app is already fully loaded and initialized:
  return ( String )browser.evaluate( "return myWidget.getData();" );
}</pre>
  <p>
    In JEE compatibility mode you would have to write
    something like this:
  </p>
   <pre class="lang-java">
public void getText( final MyCallback callback ) {
  browser.evaluate( "return myWidget.getData();", new BrowserCallback() {
    public void evaluationSucceeded( Object result ) {
      callback.handleGetText( ( String )result );
    }
    public void evaluationFailed( Exception exception ) {
      throw new RuntimeException( exception );
    }
  } );
}</pre>
  <p>
    If you are writing a custom widget that is supposed to feature getter that need to obtain their
    value using <em>evaluate</em>, either use the SWT compatibility mode, or consider
    another type of <a href="custom-widget.html">custom widget</a>.
  </p>



</div>

<div id="rightcolumn">
  <a style = "color:inherit;text-decoration:none;"
    href="index.html">
  <h2 style="padding-bottom:12px;">Contents / RAP 4.1</h2></a>

  <ul id="dev-guide-nav"><li class="category-group"><span><span class="arrow"></span>Getting Started</span><ul><li><a href="setup-ide.html">Setting up the Eclipse IDE</a></li><li><a href="target-install.html">Installing a RAP Target</a></li><li><a href="hello-world.html">Creating a Hello World with RAP</a></li><li><a href="launcher.html">Launching RAP Applications from the IDE</a></li><li><a href="examples.html">RAP Examples</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>RAP Widget Toolkit</span><ul><li><a href="rwt.html">Differences between RWT and SWT</a></li><li><a href="client.html">The RAP Client</a></li><li><a href="key-and-mouse-events.html">Key and Mouse Event Handling</a></li><li><a href="tree-table.html">Tree, Table and the Nebula Grid</a></li><li><a href="markup.html">Fonts and Markup in RAP</a></li><li><a class="active" href="web-embedding.html">Embedding Web Components</a></li><li><a href="navigation.html">Browser Navigation and History</a></li><li><a href="file-upload.html">File Upload</a></li><li><a href="theming.html">RWT Theming</a></li><li><a href="custom-widget.html">Custom Widgets</a></li><li><a href="scripting.html">Scripting</a></li><li><a href="resources.html">Static Resources and Downloads</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Scopes and Threads in RAP</span><ul><li><a href="scopes.html">Scopes in RAP</a></li><li><a href="singletons.html">Singletons and Static Fields</a></li><li><a href="data-stores.html">Storing Data</a></li><li><a href="threads.html">Threads in RAP</a></li><li><a href="server-push.html">Server Push</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Building Applications</span><ul><li><a href="application-setup.html">Choosing an Application Setup</a></li><li><a href="application-configuration.html">Application Configuration</a></li><li><a href="branding.html">Branding</a></li><li><a href="rwt-standalone.html">RWT Standalone</a></li><li><a href="deployment.html">WAR Deployment</a></li><li><a href="look-and-feel.html">Look and Feel</a></li><li><a href="internationalization.html">Internationalization</a></li><li><a href="related-technologies.html">Related Technologies</a></li></ul></li><li class="category-group"><span><span class="arrow"></span>Reference</span><ul><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/api/overview-summary.html">API Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/extension-points/index.html">RAP Extension Points Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/theming/index.html">RAP Theming Reference</a></li><li><a style="padding-right:13px;background:url(../images/external.png) center right no-repeat" href="http://download.eclipse.org/rt/rap/doc/4.1/guide/reference/jsdoc/index.html">RAP WebClient API Reference</a></li></ul></li></ul></div>

<script type="text/javascript">
  $( 'ul#dev-guide-nav li.category-group ul' ).each( function() {
    if( !$( this ).find( '.active' ).attr( 'class' ) ) {
      $( this ).hide();
      $( this ).addClass( 'hidden' );
    } else {
      $( this ).siblings( 'span' ).children( 'span' ).addClass( 'opened' );
    }
  } );
  $( 'ul#dev-guide-nav li.category-group span' ).click( function() {
    var navList = $( this ).siblings( 'ul' );
    var arrow = $( this ).children( 'span' );
    if( navList.hasClass( 'hidden' ) ) {
      navList.slideDown();
      navList.removeClass( 'hidden' );
      arrow.addClass( 'opened' );
    } else {
      navList.slideUp();
      navList.addClass( 'hidden' );
      arrow.removeClass( 'opened' );
    }
  } );
</script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-910670-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17128428-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>      <div class="stop"></div>
      <div id="footer">
        <ul id="footernav">
          <li><a href="https://www.eclipse.org/">Eclipse</a></li>
          <li><a href="https://www.eclipse.org/legal/privacy/">Privacy Policy</a></li>
          <li><a href="https://www.eclipse.org/legal/terms-of-use/">Terms of Use</a></li>
          <li><a href="https://www.eclipse.org/legal/copyright/">Copyright Agent</a></li>
          <li><a href="https://www.eclipse.org/legal/">Legal</a></li>
          <li><a href="https://www.eclipse.org/org/foundation/contact.php">Contact Us</a></li>
        </ul>
        <a href="https://www.eclipse.org/"><img src="../images/logos/eclipse.png" alt="Eclipse logo" /></a>
        <span id="copyright">Copyright &copy; 2024 The Eclipse Foundation. All Rights Reserved.</span>
      </div>

    </div>
  </div>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: '3e9946bc18fa7d26dc03c883df41b9de',
      indexName: 'eclipse_rap',
      inputSelector: '#search-query',
      algoliaOptions: {
        hitsPerPage: 9,
      }
    });
    $( function() {
      // prettify rewrites <pre> and <code> elements with class="prettyprint"
      // optionally, the language can be selected using a "lang-" prefixed class, e.g. lang-java
      $( 'pre[class|="lang"],code[class|="lang"]' ).addClass( "prettyprint" );
      $( "pre[lang],code[lang]" ).addClass( function() {
        var lang = $( this ).attr( "lang" );
        return "prettyprint" + ( lang ? " lang-" + lang : "" );
      } );
      prettyPrint();
    } );
  </script>
</body>
</html>
